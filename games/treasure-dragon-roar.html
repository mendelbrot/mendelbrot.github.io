<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="My hobbies and projects site">
  <title>Gregory Maxedon</title>
  <link rel="stylesheet" type="text/css" href="/css/styles.css">
</head>

<body class="
  background
  overflow-y-auto
  min-h-screen flex flex-col 
  p-2 sm:p-4
  ">

  <main class="flex-1">
    <div class="mx-auto">
      
<script type="module">
  import init from "/assets/wasm/treasure-dragon-roar/treasure-dragon-roar.js";

  const body = document.querySelector("body")

  window.start = () => {
    init().catch((error) => {
      if (!error.message.startsWith("Using exceptions for control flow, don't mind me. This isn't actually an error!")) {
          throw error;
      }
    }).then(() => {
      const canvas = document.querySelector("canvas");
      const div = document.getElementsByClassName("mx-auto")[0];
      const startButton = document.getElementById("start");
      startButton.remove();
      div.appendChild(canvas);
      canvas.classList.add("mx-auto")
      const instructions = document.getElementById("instructions");
      div.appendChild(instructions);
      instructions.classList.remove("hidden");
      canvas.focus();
    })
  }
</script>

<button id="start" class="border-2 rounded-lg p-8 text-2xl font-semibold bg-sky-300 hover:bg-green-300 mx-auto block mt-[30vh]" onclick="start()">Start</button>

<p id="instructions" class="hidden max-w-prose mx-auto text-white">
  Explore the landscape to find the treasure. Press the arrow keys to move; Press [Enter] grab the treasure and to drop the treasure; Press [Space] to ROAR!
</p>
    </div>
  </main>
  
</body>

</html>